# API Home-Model
A RESTful designed API which stores data supplied by either a web client or electronic prototyping platform (e.g. arduino or raspberry pi) through HTTP protocols using express-js.

## Installation for development
Install dependencies:
```
npm install
```
Start a host on default port 3000:
```
npm start
````

Requires mysql database which can be generated by using ```database.sql``` and sample data can also be added with ```sameple-data.sql```.

## Routes

HTTP       Body/params/query Process
PUT        Username, password, email    Create a new user
POST       Username, password           Create a new session with user
DELETE     Username                     Delete the session with user
POST       Device token                 Create a new hub for a user
GET        None                         Return all devices a user has registered
GET        Deviceid, type, thingid      Return all known data stored about a “thing”
GET        Deviceid, amount             Return n latest logs by date
GET        Deviceid                     Return  number of logs made by a device
GET        Deviceid, thingid            Return number of logs a “thing” has made
GET        Deviceid, thingid, date      Return the average state of a “thing” between a date
GET        Deviceid, thingid, days      Return the average state of a “thing” between now and n days
GET        Deviceid, thingid, days      Return the average state for every day of a “thing” between now and n days
GET        Deviceid, thingid, hours     Return the average state of a “thing” over n hours
DELETE     Deviceid                     Remove access to a device
POST       Deviceid, thingid, state     Create a new log with the new state
PUT        Deviceid, thingid, state     Create a new log for every entry in the reading
GET        Deviceid, type               Return all “things” with the type
GET        Deviceid, category           Return the number of “things” associated with a device which belongs to the category

## Built with
- [Expressjs](https://expressjs.com/) - Framework used
- [Expresssession](https://github.com/expressjs/session) - Express Session for monitoring user sessions

## Dependencies
```
"bcrypt": "^2.0.1",
"body-parser": "~1.18.2",
"cookie-parser": "~1.4.3",
"cors": "^2.8.4",
"debug": "~2.6.9",
"express": "~4.15.5",
"express-sesssion": "^1.15.5",
"jade": "~1.11.0",
"morgan": "~1.9.0",
"mysql": "^2.15.0",
"serve-favicon": "~2.4.5"
```

## Authors
- Arran Gravestock

## License
This project is licensed under the MIT License - see the LICENSE.md file for details
